<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Guillotine - æ€ æƒ°æ˜¯æ­£ã‚¢ãƒ—ãƒª</title>
    <!-- CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div class="container">
        <header>
            <h1 class="app-title">â˜ ï¸ Social Guillotine</h1>
            <p class="subtitle">æ€ æƒ°ã¯ã€Œç¤¾ä¼šçš„ãªæ­»ã€ã§å„Ÿãˆã€‚</p>
            <button id="openModalBtn" class="add-btn">âš ï¸ å¥‘ç´„æ›¸ã«ç½²åï¼ˆã‚¿ã‚¹ã‚¯è¿½åŠ ï¼‰</button>
        </header>

        <main>
            <ul class="task-list">
                <!-- Flaskã‹ã‚‰æ¸¡ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ«ãƒ¼ãƒ—ã§è¡¨ç¤ºã—ã¾ã™ -->
                {% for task in tasks %}
                    <!-- is_punishedãŒTrueãªã‚‰ã€expiredã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¦è¦‹ãŸç›®ã‚’å¤‰ãˆã¾ã™ -->
                    <li class="task-item {% if task.is_punished %}expired{% endif %}">
                        <div class="task-info">
                            <span class="task-name">{{ task.title }}</span>
                            
                            <div class="task-meta">
                                {% if task.deadline %}
                                    <span class="deadline">â³ {{ task.deadline.strftime('%Y/%m/%d %H:%M') }}</span>
                                {% endif %}
                                {% if task.penalty_text %}
                                    <span class="penalty">ğŸ’£ ç½°: {{ task.penalty_text }}</span>
                                {% endif %}
                            </div>

                            <!-- is_punishedãŒTrueãªã‚‰ã€åŸ·è¡Œæ¸ˆã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã™ -->
                            {% if task.is_punished %}
                                <div class="punished-msg">ğŸ’€ åŸ·è¡Œæ¸ˆã¿ï¼šãƒ„ã‚¤ãƒ¼ãƒˆãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ</div>
                            {% endif %}
                        </div>

                        <!-- ã‚¿ã‚¹ã‚¯å‰Šé™¤ï¼ˆå®Œäº†ï¼‰ãƒœã‚¿ãƒ³ -->
                        <form action="{{ url_for('delete_task', task_id=task.id) }}" method="post">
                            <button type="submit" class="delete-btn">è§£é™¤ï¼ˆå®Œäº†ï¼‰</button>
                        </form>
                    </li>
                {% else %}
                    <!-- ã‚¿ã‚¹ã‚¯ãŒä¸€ã¤ã‚‚ãªã„å ´åˆã«è¡¨ç¤ºã—ã¾ã™ -->
                    <li class="no-task">ç¾åœ¨ã€å‘½ï¼ˆãƒ—ãƒ©ã‚¤ãƒ‰ï¼‰ã¯å®‰å…¨ã§ã™ã€‚</li>
                {% endfor %}
            </ul>
        </main>
    </div>

    <!-- ã‚¿ã‚¹ã‚¯è¿½åŠ ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content input-mode">
            <span class="close-btn">&times;</span>
            <h2>ğŸ’€ å‡¦åˆ‘å¥‘ç´„æ›¸ã®ä½œæˆ</h2>
            <form action="{{ url_for('add_task') }}" method="post">
                
                <label>ç¾©å‹™ï¼ˆã‚¿ã‚¹ã‚¯å†…å®¹ï¼‰</label>
                <input type="text" name="task_title" placeholder="ä¾‹ï¼šæ˜æ—¥ã®1é™ã«å‡ºå¸­ã™ã‚‹" required>

                <label>æœŸé™ï¼ˆTime Limitï¼‰</label>
                <input type="datetime-local" name="deadline" required>

                <label style="color: #e74c3c; font-weight: bold;">ä¸å±¥è¡Œæ™‚ã®ç¤¾ä¼šçš„åˆ¶è£ï¼ˆè‡ªå‹•æŠ•ç¨¿ï¼‰</label>
                <textarea name="penalty_text" placeholder="ä¾‹ï¼šç§ã¯å£ã ã‘ã®ç„¡èƒ½ã§ã™ã€‚æ˜æ—¥ã€‡ã€‡ã§å¥¢ã‚Šã¾ã™ã€‚" required></textarea>

                <button type="submit" class="danger-btn">ğŸ©¸ è¡€åˆ¤ã‚’æŠ¼ã—ã¦è¿½åŠ </button>
            </form>
        </div>
    </div>

    <!-- æœŸé™åˆ‡ã‚Œæ¼”å‡ºç”¨ï¼ˆå½ãƒ„ã‚¤ãƒ¼ãƒˆï¼‰ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="fakeTweetModal" class="modal tweet-modal">
        <div class="modal-content tweet-content">
            <h3 style="color: #1da1f2;">Twitter (X) è‡ªå‹•æŠ•ç¨¿é€šçŸ¥</h3>
            <p>ä»¥ä¸‹ã®å†…å®¹ãŒã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰æŠ•ç¨¿ã•ã‚Œã¾ã—ãŸã€‚</p>
            
            <div class="fake-tweet-card">
                <div class="tweet-header">
                    <div class="tweet-icon"></div>
                    <div class="tweet-name">ã‚ãªãŸã®åå‰ <span style="color:gray">@lazy_student</span></div>
                </div>
                <div class="tweet-body" id="tweetTextDisplay">
                    <!-- ã“ã“ã«JavaScriptã§ãƒ„ã‚¤ãƒ¼ãƒˆæœ¬æ–‡ãŒæŒ¿å…¥ã•ã‚Œã¾ã™ -->
                </div>
                <div class="tweet-footer">
                    <span>ğŸ’¬ 12</span> <span>Undefined 89</span> <span>â¤ï¸ 204</span>
                </div>
            </div>

            <p style="margin-top: 20px; color: red; font-weight: bold;">ç¤¾ä¼šçš„ä¿¡ç”¨ãŒå¤±å¢œã—ã¾ã—ãŸã€‚</p>
            <button onclick="closeTweetModal()" class="close-tweet-btn">çµ¶æœ›ã—ã¦é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <!-- â˜…â˜…â˜… AIã‹ã‚‰ã®è¤’ã‚è¨€è‘‰ãƒ¢ãƒ¼ãƒ€ãƒ« â˜…â˜…â˜… -->
    <!-- app.pyã‹ã‚‰flashãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹æ™‚ã ã‘ã€ã“ã®éƒ¨åˆ†ãŒHTMLã«å‡ºåŠ›ã•ã‚Œã¾ã™ -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div id="praiseModal" class="modal" style="display: block;">
                    <div class="modal-content praise-modal-content">
                        <span class="close-btn" id="closePraiseModalBtn">&times;</span>
                        <h2 class="praise-title">ğŸ‰ AI Assistant ğŸ‰</h2>
                        <!-- AIã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã“ã“ã«è¡¨ç¤ºã—ã¾ã™ -->
                        <p class="praise-message">{{ message }}</p>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>